var on=require("../events/on"),clone=require("../util/clone"),attrState="data-pjax-state",linkAction=function(t,e){if(!isDefaultPrevented(e)){var o=clone(this.options),r=checkIfShouldAbort(t,e);if(r)t.setAttribute(attrState,r);else{if(e.preventDefault(),this.options.currentUrlFullReload&&t.href===window.location.href.split("#")[0])return t.setAttribute(attrState,"reload"),void this.reload();t.setAttribute(attrState,"load"),o.triggerElement=t,this.loadUrl(t.href,o)}}};function checkIfShouldAbort(t,e){return 1<e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey?"modifier":t.protocol!==window.location.protocol||t.host!==window.location.host?"external":t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,"")?"anchor":t.href===window.location.href.split("#")[0]+"#"?"anchor-empty":void 0}var isDefaultPrevented=function(t){return t.defaultPrevented||!1===t.returnValue};module.exports=function(e){var o=this;e.setAttribute(attrState,""),on(e,"click",function(t){linkAction.call(o,e,t)}),on(e,"keyup",function(t){13===t.keyCode&&linkAction.call(o,e,t)}.bind(this))};